"use strict";angular.module("snippit",["snippit.main","snippit.services","snippit.three","snippit.auth","ui.router"]).run(["$rootScope","$location","$http",function(e,t,n){e.$on("$stateChangeStart",function(e,i,o){n.get("/auth/isAuthenticated").success(function(e){e.auth||t.path("/signin")})})}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/app",templateUrl:"templates/main.html",controller:"MainController",authenticate:!0}).state("app.three",{url:"/three",views:{nest:{templateUrl:"templates/three.html",controller:"ThreeController"}}}).state("signin",{url:"/signin",templateUrl:"templates/signin.html",controller:"AuthController"}),t.otherwise("/app/three")}]),angular.module("snippit.auth",["snippit"]).controller("AuthController",["$scope","$window","ThreeFactory",function(e,t,n){var i,o,r;e.objects=[],e.targets={sphere:[]};var a=function(){r=new THREE.PerspectiveCamera(30,t.innerWidth/t.innerHeight,1,1e4),r.position.z=3e3,i=new THREE.Scene;for(var a=new THREE.Vector3,l=data.length,c=0;l>c;c++)n.createScene(c,data,i,e.objects),n.sphere(c,a,e.targets.sphere,800,l);o=new THREE.CSS3DRenderer,o.setSize(t.innerWidth,t.innerHeight),o.domElement.style.position="absolute",o.domElement.classList.add("render"),e.transform(e.targets.sphere,2e3),document.getElementById("signin").appendChild(o.domElement),window.addEventListener("resize",s,!1)};e.transform=function(t,n){TWEEN.removeAll();for(var i=0;i<e.objects.length;i++){var o=e.objects[i],r=t[i];new TWEEN.Tween(o.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(o.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var s=function(){r.aspect=window.innerWidth/t.innerHeight,r.updateProjectionMatrix(),o.setSize(window.innerWidth,t.innerHeight),e.render()},l=function(){requestAnimationFrame(l),TWEEN.update()};angular.element(document).ready(function(){a(),l()}),e.render=function(){o.render(i,r)}}]),angular.module("snippit.main",["snippit"]).controller("MainController",["$scope","$http",function(e,t){e.searchData="",e.requestData=function(){console.log("/*/*/*REQUESTING DATA*/*/*/"),t.post("/",{searchData:e.searchData}).success(function(e){console.log("RESPONSE",e)})}}]),angular.module("snippit.services",["snippit"]).factory("ThreeFactory",function(){var e=function(e,t,n,i,o){var r=document.createElement("div");r.className="element";var a=document.createElement("img");a.src=t[e].images[5].source,r.appendChild(a);var s=new THREE.CSS3DObject(r);if(s.position.x=4e3*Math.random()-2e3,s.position.y=4e3*Math.random()-2e3,s.position.z=4e3*Math.random()-2e3,n.add(s),o){var l=o.bind(e);r.addEventListener("click",l)}i.push(s)},t=function(e,t,n){var i=new THREE.Object3D;i.position.x=t%e*140-280,i.position.y=-(180*(Math.floor(t/e)+1))+540,n.push(i)},n=function(e,t,n,i,o){var r=Math.acos(-1+2*e/o),a=Math.sqrt(o*Math.PI)*r,s=new THREE.Object3D;s.position.x=i*Math.cos(a)*Math.sin(r),s.position.y=i*Math.sin(a)*Math.sin(r),s.position.z=i*Math.cos(r),t.copy(s.position).multiplyScalar(2),s.lookAt(t),n.push(s)},i=function(e,t,n,i,o,r,a,s,l){var c=new THREE.Object3D,p=t*o+t%e/e*2*Math.PI;c.position.x=a*Math.sin(p),c.position.y=-(t*l)+r,c.position.z=s*Math.cos(p),n.x=2*c.position.x,n.y=c.position.y,n.z=2*c.position.z,c.lookAt(n),i.push(c)},o=function(e,t,n){var i=new THREE.Object3D;i.position.x=t%e*400-800,i.position.y=400*-(Math.floor(t/e)%e)+800,i.position.z=1e3*Math.floor(t/(e*e))-2e3,n.push(i)};return{createScene:e,table:t,sphere:n,helix:i,grid:o}}),angular.module("snippit.three",["snippit"]).controller("ThreeController",["$scope","ThreeFactory","$window","$document",function(e,t,n,i){var o,r,a,s,l=function(){return n.innerHeight-document.getElementsByClassName("header")[0].offsetHeight};e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]};var c=function(){e.objects=[],e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]},a=new THREE.PerspectiveCamera(30,n.innerWidth/l(),1,1e4),a.position.z=2500,o=new THREE.Scene;for(var i=new THREE.Vector3,c=data.length,d=0;c>d;d++)t.createScene(d,data,o,e.objects,e.log),t.table(5,d,e.targets.table),t.sphere(d,i,e.targets.sphere,800,c),t.helix(1,d,i,e.targets.helix,.175,450,900,900,8),t.helix(2,d,i,e.targets.doubleHelix,.175,450,500,500,50),t.helix(3,d,i,e.targets.tripleHelix,.1,450,500,500,50),t.grid(5,d,e.targets.grid);r=new THREE.CSS3DRenderer,r.setSize(n.innerWidth,l()),r.domElement.style.position="absolute",r.domElement.classList.add("render"),e.transform(e.targets.table,2e3),document.getElementById("container").appendChild(r.domElement),window.addEventListener("resize",p,!1),s=new THREE.OrbitControls(a,r.domElement),s.damping=.2,s.addEventListener("change",e.render)};e.log=function(){console.log(this)},e.clicked=function(t){e.transform(t,2e3),new TWEEN.Tween(a.position).to({x:0,y:0,z:3e3},2e3).start(),new TWEEN.Tween(a.rotation).to({_x:-0,_y:0,_z:-0},2e3).start(),new TWEEN.Tween(s.center).to({x:0,y:0,z:0},2e3).start()},e.transform=function(t,n){TWEEN.removeAll();for(var i=0;i<e.objects.length;i++){var o=e.objects[i],r=t[i];new TWEEN.Tween(o.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(o.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var p=function(){a.aspect=window.innerWidth/l(),a.updateProjectionMatrix(),r.setSize(window.innerWidth,l()),e.render()},d=function(){requestAnimationFrame(d),TWEEN.update(),s.update()};angular.element(document).ready(function(){c(),d()}),e.render=function(){r.render(o,a)},e.getPics=function(){}}]);