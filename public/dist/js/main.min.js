"use strict";angular.module("snippit",["snippit.main","snippit.services","snippit.three","snippit.auth","snippit.search","autocomplete","ui.router"]).run(["$rootScope","$location","$http",function(e,t,n){e.$on("$stateChangeStart",function(e,o,r){n.get("/auth/isAuthenticated").success(function(e){e.auth||t.path("/signin")})})}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/app",templateUrl:"templates/main.html",controller:"MainController",authenticate:!0}).state("app.three",{url:"/three",views:{content:{templateUrl:"templates/three.html",controller:"ThreeController"}}}).state("signin",{url:"/signin",templateUrl:"templates/signin.html",controller:"AuthController"}).state("search",{url:"/search",templateUrl:"templates/search.html",controller:"SearchController"}),t.otherwise("/app/three")}]),angular.module("snippit.auth",["snippit"]).controller("AuthController",["$scope","$window","ThreeFactory",function(e,t,n){var o,r,i;e.objects=[],e.targets={sphere:[]};var a=function(){i=new THREE.PerspectiveCamera(30,t.innerWidth/t.innerHeight,1,1e4),i.position.z=3e3,o=new THREE.Scene;for(var a=new THREE.Vector3,l=data.length,c=0;l>c;c++)n.createScene(c,data,o,e.objects),n.sphere(c,a,e.targets.sphere,800,l);console.log(e.objects[0].element.innerHTML),r=new THREE.CSS3DRenderer,r.setSize(t.innerWidth,t.innerHeight),r.domElement.style.position="absolute",r.domElement.classList.add("render"),e.transform(e.targets.sphere,2e3),document.getElementById("signin").appendChild(r.domElement),window.addEventListener("resize",s,!1)};e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var r=e.objects[o],i=t[o];new TWEEN.Tween(r.position).to({x:i.position.x,y:i.position.y,z:i.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(r.rotation).to({x:i.rotation.x,y:i.rotation.y,z:i.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var s=function(){i.aspect=window.innerWidth/t.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,t.innerHeight),e.render()},l=function(){requestAnimationFrame(l),TWEEN.update()};angular.element(document).ready(function(){a(),l()}),e.render=function(){r.render(o,i)}}]),angular.module("snippit.main",["snippit","snippit.services"]).controller("MainController",["Facebook","$scope",function(e,t){}]),angular.module("snippit.search",["snippit"]).controller("SearchController",["$scope",function(e){e.albums=["person1","person2","person3","person4","person5"],e.query="",e.returnThis=function(){console.log("querrrryyyy",e.query)}}]),angular.module("snippit.services",["snippit"]).factory("ThreeFactory",function(){var e=function(e,t,n,o,r,i){var a=document.createElement("div");a.className="element";var s=document.createElement("img");s.src=t[e].images[5].source,a.appendChild(s);var l=new THREE.CSS3DObject(a);if(l.position.x=4e3*Math.random()-2e3,l.position.y=4e3*Math.random()-2e3,l.position.z=4e3*Math.random()-2e3,n.add(l),r){var c=r.bind(e);a.addEventListener("click",c)}o.push(l)},t=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*140-280,o.position.y=-(180*(Math.floor(t/e)+1))+540,n.push(o)},n=function(e,t,n,o,r){var i=Math.acos(-1+2*e/r),a=Math.sqrt(r*Math.PI)*i,s=new THREE.Object3D;s.position.x=o*Math.cos(a)*Math.sin(i),s.position.y=o*Math.sin(a)*Math.sin(i),s.position.z=o*Math.cos(i),t.copy(s.position).multiplyScalar(2),s.lookAt(t),n.push(s)},o=function(e,t,n,o,r,i,a,s,l){var c=new THREE.Object3D,p=t*r+t%e/e*2*Math.PI;c.position.x=a*Math.sin(p),c.position.y=-(t*l)+i,c.position.z=s*Math.cos(p),n.x=2*c.position.x,n.y=c.position.y,n.z=2*c.position.z,c.lookAt(n),o.push(c)},r=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*400-800,o.position.y=400*-(Math.floor(t/e)%e)+800,o.position.z=1e3*Math.floor(t/(e*e))-2e3,n.push(o)};return{createScene:e,table:t,sphere:n,helix:o,grid:r}}).factory("Facebook",["$http",function(e){var t=function(){return e.get("/getFacebookWall")},n=function(){return e.get("/getFacebookAlbums")};return{getWallData:t,getAlbumData:n}}]),angular.module("snippit.three",["snippit"]).controller("ThreeController",["$scope","ThreeFactory","$window","$document","Facebook",function(e,t,n,o,r){var i,a,s,l,c,p=function(){return n.innerHeight-document.getElementsByClassName("header")[0].offsetHeight};e.objects=[],e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]},e.changeDynamcally=function(){for(var t=e.objects.length,n=0;t>n;n++)console.log("THIS ONE",e.objects[n])};var u=function(){console.log("INITIATED"),c||(c=data),a&&document.getElementById("container").removeChild(a.domElement),s=new THREE.PerspectiveCamera(30,n.innerWidth/p(),1,1e4),s.position.z=2500,i=new THREE.Scene;for(var o=new THREE.Vector3,r=c.length,u=0;r>u;u++)t.createScene(u,c,i,e.objects,e.log),t.table(5,u,e.targets.table),t.sphere(u,o,e.targets.sphere,800,r),t.helix(1,u,o,e.targets.helix,.175,450,900,900,8),t.helix(2,u,o,e.targets.doubleHelix,.175,450,500,500,50),t.helix(3,u,o,e.targets.tripleHelix,.1,450,500,500,50),t.grid(5,u,e.targets.grid);console.log(e.objects[0]),a=new THREE.CSS3DRenderer,a.setSize(n.innerWidth,p()),a.domElement.style.position="absolute",a.domElement.classList.add("render"),e.transform(e.targets.table,2e3),document.getElementById("container").appendChild(a.domElement),window.addEventListener("resize",d,!1),l=new THREE.OrbitControls(s,a.domElement),l.damping=.2,l.addEventListener("change",e.render)};e.log=function(){console.log(this)},e.clicked=function(t){e.transform(t,2e3),new TWEEN.Tween(s.position).to({x:0,y:0,z:3e3},2e3).start(),new TWEEN.Tween(s.rotation).to({_x:-0,_y:0,_z:-0},2e3).start(),new TWEEN.Tween(l.center).to({x:0,y:0,z:0},2e3).start()},e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var r=e.objects[o],i=t[o];new TWEEN.Tween(r.position).to({x:i.position.x,y:i.position.y,z:i.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(r.rotation).to({x:i.rotation.x,y:i.rotation.y,z:i.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var d=function(){s.aspect=window.innerWidth/p(),s.updateProjectionMatrix(),a.setSize(window.innerWidth,p()),e.render()},h=function(){requestAnimationFrame(h),TWEEN.update(),l.update()};angular.element(document).ready(function(){u(),h()}),e.render=function(){a.render(i,s)},e.getPics=function(){console.log("SENT REQ"),r.getWallData().then(function(e){c=JSON.parse(e.data),console.log(c),u()})}}]);