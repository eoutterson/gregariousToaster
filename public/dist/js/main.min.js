"use strict";angular.module("snippit",["snippit.main","snippit.services","snippit.three","snippit.auth","snippit.search","autocomplete","ui.router"]).run(["$rootScope","$location","$http",function(e,t,n){e.$on("$stateChangeStart",function(e,o,i){n.get("/auth/isAuthenticated").success(function(e){e.auth||t.path("/signin")})})}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/app",templateUrl:"templates/main.html",controller:"MainController",authenticate:!0}).state("app.three",{url:"/three",views:{content:{templateUrl:"templates/three.html",controller:"ThreeController"}}}).state("signin",{url:"/signin",templateUrl:"templates/signin.html",controller:"AuthController"}).state("search",{url:"/search",templateUrl:"templates/search.html",controller:"SearchController"}),t.otherwise("/app/three")}]),angular.module("snippit.auth",["snippit"]).controller("AuthController",["$scope","$window","ThreeFactory",function(e,t,n){var o,i,r;e.objects=[],e.targets={sphere:[]};var a=0,s=function(){r=new THREE.PerspectiveCamera(30,t.innerWidth/t.innerHeight,1,1e4),r.position.z=3e3,o=new THREE.Scene;for(var a=new THREE.Vector3,s=data.length,c=[],p=0;p<data.length;p++)c.push(data[p].images[5].source);for(var p=0;s>p;p++)n.createScene(p,c,o,e.objects),n.sphere(p,a,e.targets.sphere,800,s);console.log(e.objects[0].element),i=new THREE.CSS3DRenderer,i.setSize(t.innerWidth,t.innerHeight),i.domElement.style.position="absolute",i.domElement.classList.add("render"),e.transform(e.targets.sphere,2e3),document.getElementById("signin").appendChild(i.domElement),window.addEventListener("resize",l,!1)};e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var i=e.objects[o],r=t[o];new TWEEN.Tween(i.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(i.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var l=function(){r.aspect=window.innerWidth/t.innerHeight,r.updateProjectionMatrix(),i.setSize(window.innerWidth,t.innerHeight),e.render()},c=function(){console.log(c),requestAnimationFrame(c),TWEEN.update(),a+=.01,r.position.x=3e3*Math.sin(a),r.position.z=3e3*Math.cos(a),r.position.y=3e3*Math.cos(3*a),r.up=new THREE.Vector3(0,1,0),r.lookAt(new THREE.Vector3(0,0,0)),e.render()};angular.element(document).ready(function(){s(),c()}),e.render=function(){i.render(o,r)}}]),angular.module("snippit.main",["snippit","snippit.services"]).controller("MainController",["Facebook","$scope","$window",function(e,t,n){}]),angular.module("snippit.search",["snippit"]).controller("SearchController",["$scope",function(e){e.albums=["person1","person2","person3","person4","person5"],e.query="",e.returnThis=function(){console.log("querrrryyyy",e.query)}}]),angular.module("snippit.services",["snippit"]).factory("ThreeFactory",function(){var e=function(e,t,n,o,i){var r=document.createElement("div");r.className="element",r.setAttribute("ng-show","picData[-1]");var a=document.createElement("img");a.src=t[e],r.appendChild(a);var s=new THREE.CSS3DObject(r);if(s.position.x=4e3*Math.random()-2e3,s.position.y=4e3*Math.random()-2e3,s.position.z=4e3*Math.random()-2e3,n.add(s),i){var l=i.bind(e);r.addEventListener("click",l)}o.push(s)},t=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*140-280,o.position.y=-(180*(Math.floor(t/e)+1))+540,n.push(o)},n=function(e,t,n,o,i){var r=Math.acos(-1+2*e/i),a=Math.sqrt(i*Math.PI)*r,s=new THREE.Object3D;s.position.x=o*Math.cos(a)*Math.sin(r),s.position.y=o*Math.sin(a)*Math.sin(r),s.position.z=o*Math.cos(r),t.copy(s.position).multiplyScalar(2),s.lookAt(t),n.push(s)},o=function(e,t,n,o,i,r,a,s,l){var c=new THREE.Object3D,p=t*i+t%e/e*2*Math.PI;c.position.x=a*Math.sin(p),c.position.y=-(t*l)+r,c.position.z=s*Math.cos(p),n.x=2*c.position.x,n.y=c.position.y,n.z=2*c.position.z,c.lookAt(n),o.push(c)},i=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*400-800,o.position.y=400*-(Math.floor(t/e)%e)+800,o.position.z=1e3*Math.floor(t/(e*e))-2e3,n.push(o)};return{createScene:e,table:t,sphere:n,helix:o,grid:i}}).factory("Facebook",["$http",function(e){var t=function(){return e.get("/getFacebookWall")},n=function(){return e.get("/getFacebookAlbums")};return{getWallData:t,getAlbumData:n}}]),angular.module("snippit.three",["snippit"]).controller("ThreeController",["$scope","ThreeFactory","$window","$document","Facebook",function(e,t,n,o,i){var r,a,s,l,c,p=function(){return n.innerHeight-document.getElementsByClassName("header")[0].offsetHeight};e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]};var d=function(){if(e.objects=[],e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]},console.log("INITIATED"),!c){c=[];for(var o=0;o<data.length;o++)c.push(data[o].images[5].source)}a&&document.getElementById("container").removeChild(a.domElement),s=new THREE.PerspectiveCamera(30,n.innerWidth/p(),1,1e4),s.position.z=2500,r=new THREE.Scene;for(var i=new THREE.Vector3,d=c.length,o=0;d>o;o++)t.createScene(o,c,r,e.objects,e.hit),t.table(5,o,e.targets.table),t.sphere(o,i,e.targets.sphere,800,d),t.helix(1,o,i,e.targets.helix,.175,450,900,900,8),t.helix(2,o,i,e.targets.doubleHelix,.175,450,500,500,50),t.helix(3,o,i,e.targets.tripleHelix,.1,450,500,500,50),t.grid(5,o,e.targets.grid);a=new THREE.CSS3DRenderer,a.setSize(n.innerWidth,p()),a.domElement.style.position="absolute",a.domElement.classList.add("render"),e.transform(e.targets.table,2e3),document.getElementById("content").setAttribute("height",p()),document.getElementById("container").appendChild(a.domElement),window.addEventListener("resize",h,!1),l=new THREE.OrbitControls(s,a.domElement),l.damping=.2,l.addEventListener("change",e.render)};e.hit=function(){Modal.open({content:"<div class='imageResize'><img src='"+c[this]+"' /></div>",draggable:!1,width:"50%",height:"75%"})},e.clicked=function(t){e.transform(t,2e3),new TWEEN.Tween(s.position).to({x:0,y:0,z:3e3},2e3).start(),new TWEEN.Tween(s.rotation).to({_x:-0,_y:0,_z:-0},2e3).start(),new TWEEN.Tween(l.center).to({x:0,y:0,z:0},2e3).start()},e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var i=e.objects[o],r=t[o];new TWEEN.Tween(i.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(i.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var h=function(){s.aspect=window.innerWidth/p(),s.updateProjectionMatrix(),a.setSize(window.innerWidth,p()),e.render()},u=function(){requestAnimationFrame(u),TWEEN.update(),l.update()};angular.element(document).ready(function(){d(),u()}),e.render=function(){a.render(r,s)},e.getPics=function(){console.log("SENT REQ"),i.getWallData().then(function(e){c=JSON.parse(e.data).wallPhotos.picture,console.log(c),d()})}}]);