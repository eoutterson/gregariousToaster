"use strict";angular.module("snippit",["snippit.main","snippit.services","snippit.three","snippit.auth","ui.router"]).run(["$rootScope","$location","$http",function(e,t,n){e.$on("$stateChangeStart",function(e,o,i){n.get("/auth/isAuthenticated").success(function(e){e.auth||t.path("/signin")})})}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app",{url:"/app",templateUrl:"templates/main.html",controller:"MainController",authenticate:!0}).state("app.three",{url:"/three",views:{nest:{templateUrl:"templates/three.html",controller:"ThreeController"}}}).state("signin",{url:"/signin",templateUrl:"templates/signin.html",controller:"AuthController"}),t.otherwise("/app/three")}]),angular.module("snippit.auth",["snippit"]).controller("AuthController",["$scope","$window","ThreeFactory",function(e,t,n){var o,i,r;e.objects=[],e.targets={sphere:[]};var a=function(){r=new THREE.PerspectiveCamera(30,t.innerWidth/t.innerHeight,1,1e4),r.position.z=3e3,o=new THREE.Scene;for(var a=new THREE.Vector3,l=data.length,c=0;l>c;c++)n.createScene(c,data,o,e.objects),n.sphere(c,a,e.targets.sphere,800,l);i=new THREE.CSS3DRenderer,i.setSize(t.innerWidth,t.innerHeight),i.domElement.style.position="absolute",i.domElement.classList.add("render"),e.transform(e.targets.sphere,2e3),document.getElementById("signin").appendChild(i.domElement),window.addEventListener("resize",s,!1)};e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var i=e.objects[o],r=t[o];new TWEEN.Tween(i.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(i.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var s=function(){r.aspect=window.innerWidth/t.innerHeight,r.updateProjectionMatrix(),i.setSize(window.innerWidth,t.innerHeight),e.render()},l=function(){requestAnimationFrame(l),TWEEN.update()};angular.element(document).ready(function(){a(),l()}),e.render=function(){i.render(o,r)}}]),angular.module("snippit.main",["snippit","snippit.services"]).controller("MainController",["Facebook","$scope",function(e,t){t.pictures=null,t.getWallData=function(){e.getWallData().then(function(e){console.log(e)})},t.getAlbumData=function(){console.log("ALBUMS",t.pictures.albums)}}]),angular.module("snippit.services",["snippit"]).factory("ThreeFactory",function(){var e=function(e,t,n,o,i){var r=document.createElement("div");r.className="element";var a=document.createElement("img");a.src=t[e].source,r.appendChild(a);var s=new THREE.CSS3DObject(r);if(s.position.x=4e3*Math.random()-2e3,s.position.y=4e3*Math.random()-2e3,s.position.z=4e3*Math.random()-2e3,n.add(s),i){var l=i.bind(e);r.addEventListener("click",l)}o.push(s)},t=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*140-280,o.position.y=-(180*(Math.floor(t/e)+1))+540,n.push(o)},n=function(e,t,n,o,i){var r=Math.acos(-1+2*e/i),a=Math.sqrt(i*Math.PI)*r,s=new THREE.Object3D;s.position.x=o*Math.cos(a)*Math.sin(r),s.position.y=o*Math.sin(a)*Math.sin(r),s.position.z=o*Math.cos(r),t.copy(s.position).multiplyScalar(2),s.lookAt(t),n.push(s)},o=function(e,t,n,o,i,r,a,s,l){var c=new THREE.Object3D,p=t*i+t%e/e*2*Math.PI;c.position.x=a*Math.sin(p),c.position.y=-(t*l)+r,c.position.z=s*Math.cos(p),n.x=2*c.position.x,n.y=c.position.y,n.z=2*c.position.z,c.lookAt(n),o.push(c)},i=function(e,t,n){var o=new THREE.Object3D;o.position.x=t%e*400-800,o.position.y=400*-(Math.floor(t/e)%e)+800,o.position.z=1e3*Math.floor(t/(e*e))-2e3,n.push(o)};return{createScene:e,table:t,sphere:n,helix:o,grid:i}}).factory("Facebook",["$http",function(e){var t=function(){return e.get("/getFacebookWall")},n=function(){return e.get("/getFacebookAlbums")};return{getWallData:t,getAlbumData:n}}]),angular.module("snippit.three",["snippit"]).controller("ThreeController",["$scope","ThreeFactory","$window","$document",function(e,t,n,o){var i,r,a,s,l=function(){return n.innerHeight-document.getElementsByClassName("header")[0].offsetHeight};e.objects=[],e.targets={table:[],sphere:[],helix:[],doubleHelix:[],tripleHelix:[],grid:[]};var c=function(){a=new THREE.PerspectiveCamera(30,n.innerWidth/l(),1,1e4),a.position.z=800,i=new THREE.Scene;for(var o=new THREE.Vector3,c=data.length,u=0;c>u;u++)t.createScene(u,data,i,e.objects,e.log),t.table(5,u,e.targets.table),t.sphere(u,o,e.targets.sphere,800,c),t.helix(1,u,o,e.targets.helix,.175,450,900,900,8),t.helix(2,u,o,e.targets.doubleHelix,.175,450,500,500,50),t.helix(3,u,o,e.targets.tripleHelix,.1,450,500,500,50),t.grid(5,u,e.targets.grid);r=new THREE.CSS3DRenderer,r.setSize(n.innerWidth,l()),r.domElement.style.position="absolute",r.domElement.classList.add("render"),e.transform(e.targets.table,2e3),document.getElementById("container").appendChild(r.domElement),window.addEventListener("resize",p,!1),s=new THREE.OrbitControls(a,r.domElement),s.damping=.2,s.addEventListener("change",e.render)};e.log=function(){console.log(this)},e.clicked=function(t){e.transform(t,2e3),new TWEEN.Tween(a.position).to({x:0,y:0,z:3e3},2e3).start(),new TWEEN.Tween(a.rotation).to({_x:-0,_y:0,_z:-0},2e3).start(),new TWEEN.Tween(s.center).to({x:0,y:0,z:0},2e3).start()},e.transform=function(t,n){TWEEN.removeAll();for(var o=0;o<e.objects.length;o++){var i=e.objects[o],r=t[o];new TWEEN.Tween(i.position).to({x:r.position.x,y:r.position.y,z:r.position.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start(),new TWEEN.Tween(i.rotation).to({x:r.rotation.x,y:r.rotation.y,z:r.rotation.z},Math.random()*n+n).easing(TWEEN.Easing.Exponential.InOut).start()}new TWEEN.Tween(this).to({},2*n).onUpdate(e.render).start()};var p=function(){a.aspect=window.innerWidth/l(),a.updateProjectionMatrix(),r.setSize(window.innerWidth,l()),e.render()},u=function(){requestAnimationFrame(u),TWEEN.update(),s.update()};angular.element(document).ready(function(){c(),u()}),e.render=function(){r.render(i,a)}}]);